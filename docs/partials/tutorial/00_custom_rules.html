<h1><code ng:non-bindable=""></code>
<div><span class="hint"></span>
</div>
</h1>
<div><div class="1-custom-property-validator-page"><h3 id="how-to-create-a-custom-property-validator">How to create a custom property validator.</h3>
<p>To create a custom validation rule you have to implement IPropertyValidator interface.</p>
<pre class="prettyprint linenums">
        export interface IPropertyValidator{
            isAcceptable(s: any): boolean;
            tagName?:string;
        }
</pre>
<p>Notice, that inteface has only one method required (isAccepable(any)-&gt;boolean).</p>
<p>Let&#39;s create validator that enables to compare two dates. We want to parametrize the validator with operators less, equal or greater.</p>
<p>First we create enumaration for compare operators that enables us to parametrize validator.
<pre class="prettyprint linenums">
    export enum CompareOperator {
        //must be less than
        LessThan,

        //cannot be more than
        LessThanEqual,

        //must be the same as
        Equal,

        //must be different from
        NotEqual,

        //cannot be less than
        GreaterThanEqual,

        //must be more than
        GreaterThan
    }
</pre>
<p>Next we import dependencies - we need only some utilities.
<pre class="prettyprint linenums">
    import moment = require("moment");
    import moment = require("underscore");
</pre>
<p>Now we create the validator and implements the method is isAcceptable(any)-&gt;boolean.
<pre class="prettyprint linenums">
class DateCompareValidator implements Validation.IPropertyValidator{

    public isAcceptable(s:any){
        var isValid = false;

        //if value is not date -&gt; there is nothing to compare
        if (!_.isDate(s)) return false;

        //if date to compare is not specified - defaults to compare against now
        if (this.CompareTo == undefined) Date.now();

        var now = moment(this.CompareTo);
        var then =  moment(s);

        var diffs:number = then.diff(now);
        if (this.IgnoreTime) diffs = moment.duration(diffs).days();

        if (diffs &lt; 0) {
            isValid = this.CompareOperator == Validation.CompareOperator.LessThan
                || this.CompareOperator == Validation.CompareOperator.LessThanEqual
                || this.CompareOperator == Validation.CompareOperator.NotEqual;
        }
        else if (diffs &gt; 0) {
            isValid = this.CompareOperator == Validation.CompareOperator.GreaterThan
                || this.CompareOperator == Validation.CompareOperator.GreaterThanEqual
                || this.CompareOperator == Validation.CompareOperator.NotEqual;
        }
        else {
            isValid = this.CompareOperator == Validation.CompareOperator.LessThanEqual
                || this.CompareOperator == Validation.CompareOperator.Equal
                || this.CompareOperator == Validation.CompareOperator.GreaterThanEqual;
        }
        return isValid;
    }

    /**
     * Set the time of compare between passed date and CompareTo date.
     */
    public CompareOperator:Validation.CompareOperator;

    /**
     * The datetime against the compare is done.
     * If CompareTo is not set, then comparison is done against actual datetime.
     */
    public CompareTo:Date;

    /**
     * It forces to ignore time part of date by date compare.
     * @type {boolean}
     */
    public IgnoreTime:boolean = false;

    tagName = 'dateCompare';
}

export = DateCompareValidator;
</pre>
<div doc-tutorial-reset="1">
</div>


<h3 id="use-custom-validation-rule">Use custom validation rule</h3>
<p>Let`s use the validator
<pre class="prettyprint linenums">
    import dateCompareValidator = require('DateCompareValidator');

    var validator = new dateCompareValidator();
    validator.CompareTo = new Date(2000,2,2);
    validator.CompareOperator = Validation.CompareOperator.LessThanEqual;

    //less dates -&gt; return true
    var result = validator.isAcceptable(2000,1,1)

    //greater dates -&gt; return false
    var result = validator.isAcceptable(2000,2,3)

</pre>
</div></div>
